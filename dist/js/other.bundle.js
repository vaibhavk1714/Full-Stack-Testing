(()=>{"use strict";document.querySelector("#plusbutton").addEventListener("click",(function(){console.log("Inside"),document.querySelector(".popup").classList.add("active"),document.querySelector("#main-container").classList.add("blurred")})),document.querySelector(".popup .close-btn").addEventListener("click",(function(){document.querySelector(".popup").classList.remove("active"),document.querySelector("#main-container").classList.remove("blurred")})),document.addEventListener("DOMContentLoaded",(function(){let t=null;document.getElementById("task-table").addEventListener("click",(function(e){const n=e.target;if(n.classList.contains("edit-button")){const e=n.closest("tr");t=e.dataset.taskId;const a=e.getElementsByTagName("td"),d=a[0].textContent,o=a[1].textContent,c=a[2].textContent,l=a[3].textContent;document.getElementById("Taskname").value=d,document.getElementById("Starttime").value=o,document.getElementById("Stoptime").value=c,document.getElementById("priority").value=l,document.getElementById("createTask").textContent="Update Task",document.querySelector(".popup").classList.add("active"),document.querySelector("#main-container").classList.add("blurred")}})),document.getElementById("createTask").addEventListener("click",(async function(){const e=document.getElementById("Taskname").value,n=document.getElementById("Starttime").value,a=document.getElementById("Stoptime").value,d=document.getElementById("priority").value;try{let o;if(t?(console.log("edited task",t),o=await fetch(`http://localhost:3000/update-task/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskName:e,startTime:n,endTime:a,priority:d})})):o=await fetch("http://localhost:3000/create-task",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskName:e,startTime:n,endTime:a,priority:d})}),o.ok){if(t){const t=document.querySelectorAll("#task-table tr")[editedRowIndex].getElementsByTagName("td");t[0].textContent=e,t[1].textContent=n,t[2].textContent=a,t[3].textContent=d,document.getElementById("createTask").textContent="Create Task",editedRowIndex=-1}else{const t=document.createElement("tr");t.dataset.taskId=o._id,t.innerHTML=`<td>${e}</td><td>${n}</td><td>${a}</td><td>${d}</td><td><button class="edit-button">Edit</button></td>`,document.getElementById("task-table").appendChild(t)}document.getElementById("Taskname").value="",document.getElementById("Starttime").value="",document.getElementById("Stoptime").value="",document.getElementById("priority").value="",alert("Task is successfully "+(t?"updated":"created"))}else alert("Error "+(t?"updating":"creating")+" task");t=null}catch(e){console.error("Error "+(t?"updating":"creating")+" task:",e),alert("An error occurred while "+(t?"updating":"creating")+" the task")}}))}))})();